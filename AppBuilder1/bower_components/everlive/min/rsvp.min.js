/*! RSVP.js provides simple tools for organizing asynchronous code.
* https://github.com/tildeio/rsvp.js
* Copyright (c) 2013 Yehuda Katz, Tom Dale, and contributors
*/
(function(){if(typeof(isNativeScriptApplication)!=="undefined"&&isNativeScriptApplication){return}var b,a;(function(){var d={},c={};b=function(e,f,g){d[e]={deps:f,callback:g}};a=function(e){if(c[e]){return c[e]}c[e]={};var k=d[e],o=k.deps,n=k.callback,h=[],g;for(var j=0,f=o.length;j<f;j++){if(o[j]==="exports"){h.push(g={})}else{h.push(a(o[j]))}}var m=n.apply(this,h);return c[e]=g||m}})();b("rsvp/all",["rsvp/defer","exports"],function(f,d){var e=f.defer;function c(m){var l=[],j=e(),n=m.length;if(n===0){j.resolve([])}var o=function(i){return function(p){g(i,p)}};var g=function(i,p){l[i]=p;if(--n===0){j.resolve(l)}};var h=function(i){j.reject(i)};for(var k=0;k<m.length;k++){if(m[k]&&typeof m[k].then==="function"){m[k].then(o(k),h)}else{g(k,m[k])}}return j.promise}d.all=c});b("rsvp/async",["exports"],function(h){var d=(typeof window!=="undefined")?window:{};var i=d.MutationObserver||d.WebKitMutationObserver;var g;if(typeof process!=="undefined"&&{}.toString.call(process)==="[object process]"){g=function(k,j){process.nextTick(function(){k.call(j)})}}else{if(i){var c=[];var e=new i(function(){var j=c.slice();c=[];j.forEach(function(k){var m=k[0],l=k[1];m.call(l)})});var f=document.createElement("div");e.observe(f,{attributes:true});window.addEventListener("unload",function(){e.disconnect();e=null});g=function(k,j){c.push([k,j]);f.setAttribute("drainQueue","drainQueue")}}else{g=function(k,j){setTimeout(function(){k.call(j)},1)}}}h.async=g});b("rsvp/config",["rsvp/async","exports"],function(f,e){var d=f.async;var c={};c.async=d;e.config=c});b("rsvp/defer",["rsvp/promise","exports"],function(f,d){var c=f.Promise;function e(){var g={};var h=new c(function(j,i){g.resolve=j;g.reject=i});g.promise=h;return g}d.defer=e});b("rsvp/events",["exports"],function(f){var c=function(j,h){this.type=j;for(var i in h){if(!h.hasOwnProperty(i)){continue}this[i]=h[i]}};var d=function(k,m){for(var j=0,h=k.length;j<h;j++){if(k[j][0]===m){return j}}return -1};var e=function(h){var i=h._promiseCallbacks;if(!i){i=h._promiseCallbacks={}}return i};var g={mixin:function(h){h.on=this.on;h.off=this.off;h.trigger=this.trigger;return h},on:function(m,l,k){var j=e(this),i,h;m=m.split(/\s+/);k=k||this;while(h=m.shift()){i=j[h];if(!i){i=j[h]=[]}if(d(i,l)===-1){i.push([l,k])}}},off:function(m,l){var k=e(this),j,h,i;m=m.split(/\s+/);while(h=m.shift()){if(!l){k[h]=[];continue}j=k[h];i=d(j,l);if(i!==-1){j.splice(i,1)}}},trigger:function(k,q){var o=e(this),l,n,p,m,h;if(l=o[k]){for(var j=0;j<l.length;j++){n=l[j];p=n[0];m=n[1];if(typeof q!=="object"){q={detail:q}}h=new c(k,q);p.call(m,h)}}}};f.EventTarget=g});b("rsvp/hash",["rsvp/defer","exports"],function(g,d){var f=g.defer;function c(h){var i=0;for(var j in h){i++}return i}function e(l){var k={},j=f(),m=c(l);if(m===0){j.resolve({})}var n=function(p){return function(q){h(p,q)}};var h=function(q,p){k[q]=p;if(--m===0){j.resolve(k)}};var i=function(p){j.reject(p)};for(var o in l){if(l[o]&&typeof l[o].then==="function"){l[o].then(n(o),i)}else{h(o,l[o])}}return j.promise}d.hash=e});b("rsvp/node",["rsvp/promise","rsvp/all","exports"],function(h,d,g){var f=h.Promise;var c=d.all;function e(k,j){return function(l,m){if(l){j(l)}else{if(arguments.length>2){k(Array.prototype.slice.call(arguments,1))}else{k(m)}}}}function i(j){return function(){var n=Array.prototype.slice.call(arguments),l,k;var m=new f(function(o,p){l=o;k=p});c(n).then(function(p){p.push(e(l,k));try{j.apply(this,p)}catch(o){k(o)}});return m}}g.denodeify=i});b("rsvp/promise",["rsvp/config","rsvp/events","exports"],function(i,l,k){var f=i.config;var n=l.EventTarget;function c(o){return d(o)||(typeof o==="object"&&o!==null)}function d(o){return typeof o==="function"}var g=function(s){var r=this,o=false;if(typeof s!=="function"){throw new TypeError("You must pass a resolver function as the sole argument to the promise constructor")}if(!(r instanceof g)){return new g(s)}var p=function(t){if(o){return}o=true;j(r,t)};var q=function(t){if(o){return}o=true;m(r,t)};this.on("promise:resolved",function(t){this.trigger("success",{detail:t.detail})},this);this.on("promise:failed",function(t){this.trigger("error",{detail:t.detail})},this);s(p,q)};var e=function(s,x,v,o){var p=d(v),u,t,w,q;if(p){try{u=v(o.detail);w=true}catch(r){q=true;t=r}}else{u=o.detail;w=true}if(c(u)&&d(u.then)){u.then(function(y){j(x,y)},function(y){m(x,y)})}else{if(p&&w){j(x,u)}else{if(q){m(x,t)}else{if(s==="resolve"){j(x,u)}else{if(s==="reject"){m(x,u)}}}}}};g.prototype={constructor:g,then:function(p,o){var q=new g(function(){});if(this.isFulfilled){f.async(function(){e("resolve",q,p,{detail:this.fulfillmentValue})},this)}if(this.isRejected){f.async(function(){e("reject",q,o,{detail:this.rejectedReason})},this)}this.on("promise:resolved",function(r){e("resolve",q,p,r)});this.on("promise:failed",function(r){e("reject",q,o,r)});return q}};n.mixin(g.prototype);function j(p,o){if(p===o){h(p,o)}else{if(c(o)&&d(o.then)){o.then(function(q){if(o!==q){j(p,q)}else{h(p,q)}},function(q){m(p,q)})}else{h(p,o)}}}function h(p,o){f.async(function(){p.trigger("promise:resolved",{detail:o});p.isFulfilled=true;p.fulfillmentValue=o})}function m(p,o){f.async(function(){p.trigger("promise:failed",{detail:o});p.isRejected=true;p.rejectedReason=o})}k.Promise=g});b("rsvp/resolve",["rsvp/promise","exports"],function(g,f){var e=g.Promise;function c(h){return typeof h==="function"||(typeof h==="object"&&h!==null)}function d(h){var i=new e(function(l,k){var m;try{if(c(h)){m=h.then;if(typeof m==="function"){m.call(h,l,k)}else{l(h)}}else{l(h)}}catch(j){k(j)}});return i}f.resolve=d});b("rsvp",["rsvp/events","rsvp/promise","rsvp/node","rsvp/all","rsvp/hash","rsvp/defer","rsvp/config","rsvp/resolve","exports"],function(n,c,o,j,p,k,r,m,h){var l=n.EventTarget;var i=c.Promise;var d=o.denodeify;var f=j.all;var e=p.hash;var g=k.defer;var t=r.config;var q=m.resolve;function s(u,v){t[u]=v}h.Promise=i;h.EventTarget=l;h.all=f;h.hash=e;h.defer=g;h.denodeify=d;h.configure=s;h.resolve=q});window.RSVP=a("rsvp")})();